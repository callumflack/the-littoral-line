{% comment %} Usage: create a `google_analytics` site meta field and enter your tracking code
(UA-xxxxxxx-xx). Using jekyll environments to print this only in production:
https://www.siteleaf.com/blog/jekyll-environments/ To test: JEKYLL_ENV=production bundle exec jekyll serve
{% endcomment %} {% if site.google-analytics %} {% if jekyll.environment == 'production' %}
<script>
  (function(i, s, o, g, r, a, m) {
    i["GoogleAnalyticsObject"] = r;
    (i[r] =
      i[r] ||
      function() {
        (i[r].q = i[r].q || []).push(arguments);
      }),
      (i[r].l = 1 * new Date());
    (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m);
  })(window, document, "script", "//www.google-analytics.com/analytics.js", "ga");

  ga("create", "{{ site.google-analytics }}", "auto");
  ga("send", "pageview");
</script>
{% endif %} {% endif %}
